<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simple Schema - Meteor</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Simple Schema";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Meteor</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Accueil</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../project-structure/">Structure de Projet</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../tests/">Tests Meteor</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Plugins</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../iron-router/">Iron Router</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Simple Schema</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#simple-schema">Simple Schema</a></li>
                
                    <li><a class="toctree-l4" href="#les-types-de-champs">Les types de champs</a></li>
                
                    <li><a class="toctree-l4" href="#simpleschemaregex">SimpleSchema.RegEx</a></li>
                
                    <li><a class="toctree-l4" href="#extendoptions">extendOptions</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../social-auth/">Authentification Sociale</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../autoform-semantic-ui/">autoform-semantic-ui</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../useraccounts/">useraccounts</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../collection-timestampable/">collection-timestampable</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../collection-softremovable/">collection-softremovable</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../meteor-collection-helpers/">meteor-collection-helpers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../useraccounts-roles/">meteor-roles</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rest-api/">API Rest</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tap-i18n/">Internationalisation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../publish-counts/">publish-counts</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sikka/">Sécurité</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../plugins-a-etudier/">En cours d'évaluation</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../email/">Mails</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Applications</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../app-reactioncommerce/">E-Commerce</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../links/">Liens</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../tips/">Tips</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../faq/">Faq</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Meteor</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Plugins &raquo;</li>
        
      
    
    <li>Simple Schema</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/srault95/meteor-app-base" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="simple-schema">Simple Schema</h1>
<p><strong>Un package qui va vraiment vous faciliter la vie !!!</strong></p>
<p>En résumer, simple-schema vous permet de définir la structure de chaque Collection ou d'un simple formulaire.</p>
<p>Mais le plus important est que la validation est utilisable autant coté client que coté serveur.</p>
<ul>
<li>
<p>https://github.com/aldeed/meteor-simple-schema</p>
</li>
<li>
<p>Voir https://github.com/copleykj/Mesosphere</p>
</li>
</ul>
<p><strong>Exemple:</strong></p>
<pre><code class="js">
BookSchema = new SimpleSchema({
  title: {
    type: String,
    label: &quot;Title&quot;,
    max: 200
  },
  author: {
    type: String,
    label: &quot;Author&quot;
  },
  copies: {
    type: Number,
    label: &quot;Number of copies&quot;,
    min: 0
  },
  lastCheckedOut: {
    type: Date,
    label: &quot;Last date this book was checked out&quot;,
    optional: true
  },
  summary: {
    type: String,
    label: &quot;Brief summary&quot;,
    optional: true,
    max: 1000
  }
});

</code></pre>

<h2 id="les-types-de-champs">Les types de champs</h2>
<p><strong>En version simple:</strong></p>
<pre><code>String
Number
Boolean
Object
</code></pre>
<p><strong>La même chose comme tableau:</strong></p>
<pre><code>[String]
[Number]
[Boolean]
[Object]
[Date]
</code></pre>
<h2 id="simpleschemaregex">SimpleSchema.RegEx</h2>
<pre><code>SimpleSchema.RegEx.Email for emails (uses a permissive regEx recommended by W3C, which most browsers use)
SimpleSchema.RegEx.Domain for external domains and the domain only (requires a tld like .com)
SimpleSchema.RegEx.WeakDomain for less strict domains and IPv4 and IPv6
SimpleSchema.RegEx.IP for IPv4 or IPv6
SimpleSchema.RegEx.IPv4 for just IPv4
SimpleSchema.RegEx.IPv6 for just IPv6
SimpleSchema.RegEx.Url for http, https and ftp urls
SimpleSchema.RegEx.Id for IDs generated by Random.id() of the random package, also usable to validate a relation id.
SimpleSchema.RegEx.ZipCode for 5- and 9-digit ZIP codes

owner: {
  type: String,
  regEx: SimpleSchema.RegEx.Id,
  autoValue: function() {
    if (this.isInsert) {
      return Meteor.userId();
    }
  },
</code></pre>
<h2 id="extendoptions">extendOptions</h2>
<p>https://www.discovermeteor.com/blog/allow-deny-a-security-primer/</p>
<pre><code class="js">SimpleSchema.extendOptions({
  editable: Match.Optional(Boolean)
});

MessageSchema = new SimpleSchema({
  body: {
    type: String,
    editable: true
  },
  createdAt: {
    type: Date
  },
  userId: {
    type: String
  }
});

var whitelist = _.filter(_.keys(MessageSchema), function (property) {
  return MessageSchema[property].editable;
});

Messages.allow({
  update: function (userId, doc, fields, modifier) {
    if (userId &amp;&amp; doc.userId === userId &amp;&amp; _.difference(fields, whitelist).length === 0) {
      return true;
    }
  }
});
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../social-auth/" class="btn btn-neutral float-right" title="Authentification Sociale"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../iron-router/" class="btn btn-neutral" title="Iron Router"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../iron-router/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../social-auth/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
